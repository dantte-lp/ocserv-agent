# ============================================================================
# ocserv-agent Configuration Example
# ============================================================================
# –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OpenConnect VPN (ocserv)
# Agent configuration file for managing OpenConnect VPN (ocserv)
#
# –§–æ—Ä–º–∞—Ç: YAML
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://github.com/dantte-lp/ocserv-agent/blob/main/docs/
#
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ —Ñ–∞–π–ª–æ–º):
# Environment variables (override file values):
#   AGENT_ID                 - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞ / Agent identifier
#   CONTROL_SERVER_ADDRESS   - –ê–¥—Ä–µ—Å control server / Control server address
#   TLS_CERT_FILE           - –ü—É—Ç—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É / Certificate path
#   TLS_KEY_FILE            - –ü—É—Ç—å –∫ –∫–ª—é—á—É / Key path
#   TLS_CA_FILE             - –ü—É—Ç—å –∫ CA —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É / CA certificate path
#   LOG_LEVEL               - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ / Log level
#   TELEMETRY_ENDPOINT      - Endpoint —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ / Telemetry endpoint
# ============================================================================

# ----------------------------------------------------------------------------
# Agent Identification / –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
# ----------------------------------------------------------------------------

# –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
# Unique agent identifier (required)
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ control server
# Used for registration with control server
agent_id: "server-01"

# –ò–º—è —Ö–æ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ –ø—É—Å—Ç–æ)
# Hostname (optional, auto-detected if empty)
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞—Ö –∏ –ª–æ–≥–∞—Ö
# Used in certificates and logs
hostname: ""  # Auto-detect from system

# ----------------------------------------------------------------------------
# Control Server Connection / –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Control Server
# ----------------------------------------------------------------------------
control_server:
  # –ê–¥—Ä–µ—Å control server (host:port, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # Control server address (host:port, required)
  # –ü—Ä–∏–º–µ—Ä—ã / Examples:
  #   - "control.example.com:9090"
  #   - "203.0.113.10:9090" (RFC 5737 test address)
  #   - "localhost:9090" (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è / for testing)
  address: "control.example.com:9090"

  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–≤—è–∑–∏
  # Reconnection settings on connection loss
  reconnect:
    # –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–æ–π –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    # Initial delay before first reconnection attempt
    initial_delay: 1s

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
    # Maximum delay between attempts
    max_delay: 60s

    # –ú–Ω–æ–∂–∏—Ç–µ–ª—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ (exponential backoff)
    # Delay multiplier (exponential backoff)
    # –§–æ—Ä–º—É–ª–∞: delay = min(initial_delay * multiplier^attempt, max_delay)
    multiplier: 2

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ)
    # Maximum reconnection attempts (0 = infinite)
    max_attempts: 5

  # Circuit Breaker - –∑–∞—â–∏—Ç–∞ –æ—Ç cascade failures
  # Circuit Breaker - protection against cascade failures
  circuit_breaker:
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è circuit
    # Number of consecutive failures to open circuit
    failure_threshold: 5

    # –¢–∞–π–º–∞—É—Ç –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –∑–∞–∫—Ä—ã—Ç—å circuit (half-open state)
    # Timeout before trying to close circuit (half-open state)
    timeout: 5m

# ----------------------------------------------------------------------------
# TLS Configuration / –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TLS
# ----------------------------------------------------------------------------
tls:
  # –í–∫–ª—é—á–∏—Ç—å mTLS –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
  # Enable mTLS authentication (recommended for production)
  enabled: true

  # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
  # Auto-generate self-signed certificates if missing
  #
  # –í–ù–ò–ú–ê–ù–ò–ï / WARNING:
  #   true  - Bootstrap —Ä–µ–∂–∏–º: –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã
  #           Bootstrap mode: auto-create certs for autonomous operation
  #   false - Production —Ä–µ–∂–∏–º: —Ç—Ä–µ–±—É—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–µ CA-–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
  #           Production mode: require real CA-signed certificates
  #
  # –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ false –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é:
  # For production use false and create certificates manually:
  #   ocserv-agent gencert --output /etc/ocserv-agent/certs
  #
  # –°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: docs/CERTIFICATES.md
  # See documentation: docs/CERTIFICATES.md
  auto_generate: true

  # –ü—É—Ç—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É –∞–≥–µ–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ enabled: true)
  # Path to agent certificate (required when enabled: true)
  cert_file: "/etc/ocserv-agent/certs/agent.crt"

  # –ü—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É –∞–≥–µ–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ enabled: true)
  # Path to agent private key (required when enabled: true)
  # –í–ê–ñ–ù–û: –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 0600 (—Ç–æ–ª—å–∫–æ root read)
  # IMPORTANT: permissions must be 0600 (root read only)
  key_file: "/etc/ocserv-agent/certs/agent.key"

  # –ü—É—Ç—å –∫ CA —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É control server (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ enabled: true)
  # Path to control server CA certificate (required when enabled: true)
  ca_file: "/etc/ocserv-agent/certs/ca.crt"

  # –û–∂–∏–¥–∞–µ–º–æ–µ Common Name (CN) –≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ control server
  # Expected Common Name (CN) in control server certificate
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
  # Used for server certificate validation
  server_name: "control-server"

  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è TLS (TLS1.2 –∏–ª–∏ TLS1.3)
  # Minimum TLS version (TLS1.2 or TLS1.3)
  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è TLS1.3 –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  # TLS1.3 recommended for maximum security
  min_version: "TLS1.3"

# ----------------------------------------------------------------------------
# ocserv Configuration / –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ocserv
# ----------------------------------------------------------------------------
ocserv:
  # –ü—É—Ç—å –∫ –≥–ª–∞–≤–Ω–æ–º—É –∫–æ–Ω—Ñ–∏–≥—É ocserv (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # Path to main ocserv config (required)
  config_path: "/etc/ocserv/ocserv.conf"

  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è per-user –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  # Directory for per-user configs (optional)
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏ UpdateConfig –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
  # Used by UpdateConfig commands for user-specific settings
  config_per_user_dir: "/etc/ocserv/config-per-user"

  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è per-group –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  # Directory for per-group configs (optional)
  config_per_group_dir: "/etc/ocserv/config-per-group"

  # –ü—É—Ç—å –∫ Unix socket occtl (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # Path to occtl Unix socket (required)
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ occtl
  # Used for executing occtl commands
  ctl_socket: "/var/run/occtl.socket"

  # –ò–º—è systemd —Å–µ—Ä–≤–∏—Å–∞ ocserv (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # ocserv systemd service name (required)
  # Default: "ocserv"
  systemd_service: "ocserv"

  # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è backup –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # Directory for config backups (required)
  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è rollback
  # Used before config changes for rollback capability
  backup_dir: "/var/backups/ocserv-agent"

# ----------------------------------------------------------------------------
# Health Checks / –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
# ----------------------------------------------------------------------------
health:
  # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ heartbeat –≤ control server
  # Heartbeat interval to control server
  # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –∞–≥–µ–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
  # Shows that agent is alive and available
  heartbeat_interval: 15s

  # –ò–Ω—Ç–µ—Ä–≤–∞–ª –≥–ª—É–±–æ–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (Tier 2)
  # Deep health checks interval (Tier 2)
  # –ü—Ä–æ–≤–µ—Ä–∫–∞: ocserv socket, systemd service, config validity
  # Checks: ocserv socket, systemd service, config validity
  deep_check_interval: 2m

  # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ (Tier 3)
  # Metrics collection interval (Tier 3)
  # –°–±–æ—Ä: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç—Ä–∞—Ñ–∏–∫, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  # Collects: user count, traffic, statistics
  metrics_interval: 30s

# ----------------------------------------------------------------------------
# Telemetry (OpenTelemetry) / –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è
# ----------------------------------------------------------------------------
telemetry:
  # –í–∫–ª—é—á–∏—Ç—å OpenTelemetry tracing –∏ metrics
  # Enable OpenTelemetry tracing and metrics
  enabled: true

  # OTLP endpoint –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
  # OTLP endpoint for telemetry export
  # –ü—Ä–∏–º–µ—Ä—ã / Examples:
  #   - "http://uptrace:14318"           (Uptrace)
  #   - "http://jaeger:4318"             (Jaeger)
  #   - "http://localhost:4318"          (OpenTelemetry Collector)
  #   - "https://api.honeycomb.io:443"   (Honeycomb)
  endpoint: "http://uptrace:14318"

  # –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
  # Service name in telemetry
  # Default: "ocserv-agent"
  service_name: "ocserv-agent"

  # –í–µ—Ä—Å–∏—è —Å–µ—Ä–≤–∏—Å–∞ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ build info)
  # Service version (auto-detected from build info)
  service_version: "0.6.0"

  # Sample rate –¥–ª—è traces (0.0 - 1.0)
  # Sample rate for traces (0.0 - 1.0)
  # 1.0 = –≤—Å–µ traces, 0.1 = 10% traces
  # 1.0 = all traces, 0.1 = 10% of traces
  sample_rate: 1.0

# ----------------------------------------------------------------------------
# Logging / –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
# ----------------------------------------------------------------------------
logging:
  # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug, info, warn, error)
  # Logging level (debug, info, warn, error)
  # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ / Recommendations:
  #   debug - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ / development and debugging
  #   info  - production (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é / default)
  #   warn  - —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏ / warnings and errors only
  #   error - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ / errors only
  level: "info"

  # –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤ (json, text)
  # Log output format (json, text)
  # json - structured logging, —É–¥–æ–±–µ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ / good for parsing
  # text - human-readable, —É–¥–æ–±–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è / good for reading
  format: "json"

  # –ö—É–¥–∞ –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ (stdout, file)
  # Where to output logs (stdout, file)
  # stdout - –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏ systemd / for containers and systemd
  # file   - –≤ —Ñ–∞–π–ª (—Ç—Ä–µ–±—É–µ—Ç—Å—è file_path) / to file (requires file_path)
  output: "stdout"

  # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ output: file)
  # Path to log file (used when output: file)
  file_path: "/var/log/ocserv-agent/agent.log"

  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤ –≤ –ú–ë (rotation)
  # Maximum log file size in MB (rotation)
  max_size_mb: 100

  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ backup —Ñ–∞–π–ª–æ–≤ (–ø–æ—Å–ª–µ rotation)
  # Number of backup files (after rotation)
  max_backups: 3

  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç backup —Ñ–∞–π–ª–æ–≤ –≤ –¥–Ω—è—Ö
  # Maximum age of backup files in days
  max_age_days: 30

# ----------------------------------------------------------------------------
# Security / –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
# ----------------------------------------------------------------------------
security:
  # –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (whitelist, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  # List of allowed commands (whitelist, required)
  # –í–ê–ñ–ù–û: –¢–æ–ª—å–∫–æ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ gRPC API
  # IMPORTANT: Only these commands can be executed via gRPC API
  #
  # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
  # Security:
  #   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
  #     Strict argument validation is used
  #   - –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è command injection –ø–æ–ø—ã—Ç–∫–∏ (`;`, `|`, `&&`, –∏ —Ç.–¥.)
  #     Command injection attempts are blocked (`;`, `|`, `&&`, etc.)
  #   - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è
  #     Invalid arguments are rejected
  allowed_commands:
    - "occtl"      # ocserv control commands / –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ocserv
    - "systemctl"  # systemd service management / —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞–º–∏

  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è sudo (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  # User for sudo execution (optional)
  # –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω, –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ sudo -u <user>
  # If specified, commands are executed via sudo -u <user>
  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ –∞–≥–µ–Ω—Ç–∞
  # By default commands run as agent user
  sudo_user: "ocserv-agent"

  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
  # Maximum command execution timeout
  # –ö–æ–º–∞–Ω–¥—ã –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  # Commands are terminated after this time
  # Default: 300s (5 –º–∏–Ω—É—Ç / 5 minutes)
  max_command_timeout: 300s

# ============================================================================
# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π / Configuration Examples
# ============================================================================

# --- Bootstrap —Ä–µ–∂–∏–º (–∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ control server) ---
# --- Bootstrap mode (autonomous operation without control server) ---
#
# agent_id: "standalone-agent"
# control_server:
#   address: "localhost:9090"  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è / Not used
# tls:
#   enabled: true
#   auto_generate: true  # –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
# ocserv:
#   config_path: "/etc/ocserv/ocserv.conf"
#   ctl_socket: "/var/run/occtl.socket"
#   systemd_service: "ocserv"
#   backup_dir: "/var/backups/ocserv-agent"
# security:
#   allowed_commands: ["occtl", "systemctl"]
#   max_command_timeout: 300s

# --- Production —Ä–µ–∂–∏–º (—Å control server –∏ CA-–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏) ---
# --- Production mode (with control server and CA-signed certificates) ---
#
# agent_id: "prod-server-01"
# control_server:
#   address: "control.example.com:9090"
#   reconnect:
#     initial_delay: 1s
#     max_delay: 60s
#     multiplier: 2
#     max_attempts: 0  # Infinite retry
# tls:
#   enabled: true
#   auto_generate: false  # –¢—Ä–µ–±—É—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã / Require real certs
#   cert_file: "/etc/ocserv-agent/certs/agent.crt"
#   key_file: "/etc/ocserv-agent/certs/agent.key"
#   ca_file: "/etc/ocserv-agent/certs/ca.crt"
#   server_name: "control-server"
#   min_version: "TLS1.3"
# logging:
#   level: "info"
#   format: "json"
#   output: "stdout"
# telemetry:
#   enabled: true
#   endpoint: "https://telemetry.example.com:4318"

# --- Development —Ä–µ–∂–∏–º (–æ—Ç–ª–∞–¥–∫–∞, verbose –ª–æ–≥–∏) ---
# --- Development mode (debugging, verbose logs) ---
#
# agent_id: "dev-agent"
# tls:
#   enabled: false  # –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ! –¢–æ–ª—å–∫–æ –¥–ª—è dev / Insecure! Dev only
# logging:
#   level: "debug"
#   format: "text"
#   output: "stdout"
# health:
#   heartbeat_interval: 5s
#   deep_check_interval: 30s
#   metrics_interval: 10s
# telemetry:
#   enabled: false  # –û—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è dev / Disable for dev

# ============================================================================
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è / Additional Information
# ============================================================================
#
# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è / Documentation:
#   - README.md              - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è / General information
#   - docs/CERTIFICATES.md   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ / Certificate management
#   - docs/GRPC_TESTING.md   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ gRPC API / gRPC API testing
#   - docs/OCCTL_COMMANDS.md - –ö–æ–º–∞–Ω–¥—ã occtl / occtl commands reference
#
# üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ / Configuration validation:
#   ocserv-agent --config config.yaml --validate
#
# üèÉ –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ / Running the agent:
#   ocserv-agent --config /etc/ocserv-agent/config.yaml
#
# üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ systemd / Systemd logging:
#   journalctl -u ocserv-agent -f
#
# üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ / Certificate generation:
#   ocserv-agent gencert --output /etc/ocserv-agent/certs
#
# ============================================================================
